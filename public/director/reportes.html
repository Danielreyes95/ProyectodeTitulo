<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>Reportes - Director</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Estilos globales -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
</head>

<body class="bg-gray-100">

<!-- ==========================
        MENÚ MÓVIL
========================== -->
<button id="btnMenu"
    class="md:hidden fixed top-4 left-4 bg-green-700 text-white p-2 rounded shadow z-50">
    ☰
</button>

<!-- ==========================
        SIDEBAR DINÁMICO
========================== -->
<div id="sidebarContainer"></div>
<script src="../js/loadSidebar.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("btnMenu");
    btn.addEventListener("click", () => {
        const sidebar = document.querySelector("#sidebar");
        if (sidebar) sidebar.classList.toggle("active");
    });
});
</script>


<!-- ==========================
        CONTENIDO PRINCIPAL
========================== -->
<main class="flex-1 p-6 md:p-10 md:ml-60">

    <h1 class="text-3xl font-bold text-green-700 mb-8">Reportes Generales</h1>

    <!-- ==========================
            TARJETAS DE RESUMEN
    =========================== -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <div class="card border-l-8 border-green-600">
            <h3 class="text-lg font-semibold text-green-700">Total Jugadores</h3>
            <p id="repTotalJugadores" class="text-4xl font-bold mt-3 text-gray-800">—</p>
        </div>

        <div class="card border-l-8 border-blue-600">
            <h3 class="text-lg font-semibold text-blue-700">Total Entrenadores</h3>
            <p id="repTotalEntrenadores" class="text-4xl font-bold mt-3 text-gray-800">—</p>
        </div>

        <div class="card border-l-8 border-yellow-500">
            <h3 class="text-lg font-semibold text-yellow-600">Pagos al día</h3>
            <p id="repPagosDia" class="text-4xl font-bold mt-3 text-gray-800">—</p>
        </div>

        <div class="card border-l-8 border-purple-600">
            <h3 class="text-lg font-semibold text-purple-700">Asistencia semanal</h3>
            <p id="repAsistenciaSemanal" class="text-4xl font-bold mt-3 text-gray-800">—%</p>
        </div>

    </div>

    <!-- ==========================
            REPORTES DETALLADOS
    =========================== -->
    <div class="card mt-10">

        <h2 class="text-xl font-bold text-green-800 mb-4">
            Gráficos y Reportes Detallados
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">

            <div>
                <label class="font-semibold">Tipo de reporte</label>
                <select id="tipoReporte" class="input">
                    <option value="">Seleccione…</option>
                    <option value="asistencia">Asistencia</option>
                    <option value="pagos">Pagos</option>
                    <option value="jugadores">Jugadores</option>
                    <option value="rendimiento">Rendimiento</option>
                </select>
            </div>

            <div>
                <label class="font-semibold">Mes</label>
                <select id="reporteMes" class="input">
                    <option value="">—</option>
                </select>
            </div>

            <div>
                <label class="font-semibold">Año</label>
                <select id="reporteAnyo" class="input">
                    <option value="">—</option>
                </select>
            </div>

            <div>
                <label class="font-semibold">Categoría</label>
                <select id="reporteCategoria" class="input"></select>
            </div>

        </div>

        <button onclick="generarReporte()" class="btn btn-primary w-full md:w-auto">
            Generar Reporte
        </button>

        <div id="contenedorReporte"
             class="mt-8 min-h-[300px] p-4 border rounded bg-gray-50 shadow-inner">
            <p class="text-gray-500">Aquí aparecerán los gráficos o tablas del reporte seleccionado.</p>
        </div>

        <button onclick="descargarPDF()"
                class="btn bg-red-600 hover:bg-red-700 text-white mt-6 w-full md:w-auto">
            Descargar PDF
        </button>

    </div>

</main>

<!-- LIBRERÍAS PARA REPORTE -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="/js/reportes.js" defer></script>

<script>
/* Cargar meses */
(() => {
    const meses = ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio",
                   "Agosto","Septiembre","Octubre","Noviembre","Diciembre"];

    document.getElementById("reporteMes").innerHTML +=
        meses.map((m,i)=>`<option value="${i+1}">${m}</option>`).join("");
})();

/* Cargar años */
(() => {
    const year = new Date().getFullYear();
    let html = "";
    for(let y = year; y >= year - 5; y--) html += `<option value="${y}">${y}</option>`;
    document.getElementById("reporteAnyo").innerHTML += html;
})();
</script>

</body>
</html>
