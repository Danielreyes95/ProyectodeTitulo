<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel de Control - Director</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Estilos Globales -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">

    <style>
        #toastAviso {
            position: fixed;
            top: 20px;
            right: -400px;
            background: #16a34a;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.25);
            font-weight: bold;
            transition: right 0.5s ease;
            z-index: 9999;
        }

        /* Tarjetas acceso r√°pido */
        .card-acceso {
            display: block;
            background: white;
            border-left-width: 6px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.06);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card-acceso:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 14px rgba(0,0,0,0.12);
        }

        .titulo-acceso {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .sub-acceso {
            font-size: 0.9rem;
            color: #555;
        }
    </style>
</head>

<body class="bg-gray-100">

<!-- =============================
        VALIDACI√ìN
============================= -->
<script>
if (!localStorage.getItem("token") || localStorage.getItem("rol") !== "director") {
    window.location.href = "../index.html";
}
</script>

<!-- =============================
        SIDEBAR + MENU
============================= -->

<!-- BOT√ìN MEN√ö (M√ìVIL) -->
<button id="btnMenu"
    class="md:hidden fixed top-4 left-4 bg-green-700 text-white p-2 rounded shadow z-50">
    ‚ò∞
</button>

<!-- SIDEBAR DIN√ÅMICO -->
<div id="sidebarContainer"></div>

<script src="../js/loadSidebar.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("btnMenu");

    btn.addEventListener("click", () => {
        const sidebar = document.querySelector("#sidebar");
        if (sidebar) sidebar.classList.toggle("active");
    });
});
</script>

<!-- =============================
        CONTENIDO PRINCIPAL
============================= -->
<main class="flex-1 p-6 md:p-10 md:ml-60 relative">

    <h1 class="text-3xl font-bold text-green-700">Bienvenido, Director</h1>
    <p class="text-gray-600 mb-10">Panel de administraci√≥n general.</p>

    <!-- ACCESOS R√ÅPIDOS -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

        <a href="./jugadores.html"
           class="card-acceso border-green-600">
            <p class="titulo-acceso text-green-700">Jugadores</p>
            <p class="sub-acceso">Administrar jugadores</p>
        </a>

        <a href="./entrenadores.html"
           class="card-acceso border-blue-600">
            <p class="titulo-acceso text-blue-700">Entrenadores</p>
            <p class="sub-acceso">Gesti√≥n completa</p>
        </a>

        <a href="./categorias.html"
           class="card-acceso border-amber-600">
            <p class="titulo-acceso text-amber-700">Categor√≠as</p>
            <p class="sub-acceso">Clasificaci√≥n por edad</p>
        </a>

        <a href="./pagos.html"
           class="card-acceso border-yellow-500">
            <p class="titulo-acceso text-yellow-600">Pagos</p>
            <p class="sub-acceso">Control de mensualidades</p>
        </a>

        <a href="./avisos.html"
           class="card-acceso border-red-600">
            <p class="titulo-acceso text-red-700">Avisos</p>
            <p class="sub-acceso">Comunicados del sistema</p>
        </a>

        <a href="./reportes.html"
           class="card-acceso border-purple-600">
            <p class="titulo-acceso text-purple-700">Reportes</p>
            <p class="sub-acceso">Informes detallados</p>
        </a>

    </div>

    <!-- BOT√ìN CERRAR SESI√ìN -->
    <div class="mt-10">
        <button onclick="logout()"
            class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded shadow">
            Cerrar sesi√≥n
        </button>
    </div>

    <!-- MARCA DE AGUA -->
    <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 z-0 pointer-events-none select-none">
        <h2 class="text-6xl md:text-7xl font-extrabold text-green-600 opacity-10">
            Escuela de F√∫tbol
        </h2>
    </div>

</main>

<!-- NOTIFICACI√ìN -->
<div id="toastAviso"></div>

<script src="../js/config.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>
/* ===============================
   SOCKET IO
=============================== */
const socket = io(BASE_URL, {
    auth: {
        userId: localStorage.getItem("userId"),
        rol: localStorage.getItem("rol")
    }
});

function mostrarToast(titulo) {
    const toast = document.getElementById("toastAviso");
    toast.innerText = "üîî Nuevo aviso: " + titulo;
    toast.style.right = "20px";

    setTimeout(() => {
        toast.style.right = "-400px";
    }, 4000);
}

socket.on("nuevo-aviso", aviso => mostrarToast(aviso.titulo));

/* ===============================
   LOGOUT
=============================== */
function logout() {
    localStorage.clear();
    window.location.href = "../index.html";
}
</script>

</body>
</html>
